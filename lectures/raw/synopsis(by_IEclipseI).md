14.02 



*   Про уровни привелегий системы и устройство ОС

21.02

### Процессы



*   Система не отличает между собой процессы
*   Процессы в общем случае ничего не знают друг о друге
*   Процесс - с одной абстракция, которая позволяет не различать их между собой, с другой - конкретная структура
*   Память и регистры - однозначно определяют процесс
*   Способ выбора процесса - алгоритм shedularивания
*   Переключение с процесса на процесс - смена контекста процесса
*   Контекст процесса - указатель на виртуальную память и значения регистров
*   batch processes
*   Как отличать процессы между собой - pid

### Shedular



*   Заводит таймер для процесса(квант времени), после истечения или когда процесс сам закончился выбирает другой процесс.

Зачем много процессов или это не то было? ХЗ ☹



*   Производительность - разбиение на несколько процессов
*   дизайн приложения

### Syscalls



*   API
*   ABI

### Модель памяти процесса

*   stack - выделяется неявно, heap - должны выделять сами (malloc, new и тп),
*   секции - data, text 
*   data - статические, глобальные переменные, text
*   stack растет вниз, heap - вверх
*   frame - область памяти стека, хранящая данные об адресах возврата, информацию о локальных переменных
*   резидентная память та, которая действительно есть

28.02

### Syscalls



*   exit, fork, kill, getpid, waitpid
*   zombie process, живет, пока родитель не вызовет waitpid.
*   orphan process, если умер родитель, то новый неявно  pid == 1. 
*   strace - полезно следить за работой процесса
*   ERRNO - переменная с номером последней ошибки, strerror
*   char * strerror(int errnum) - текстовое описание ошибки
*   thread local errno переменные
*   finalizers, библиотечный вызов exit.

### Железки

*   ssd, hdd - iops, mtbf
*   считываем  и записываем секторами по 4096 байт
*   алгоритмы считывания (алгоритмы elevatorА) fifo, sstf, scan

### В unix все есть файл



1. Директории
*   . , .. , имена находящихся в ней файлов
*   формирование дерева
*   filename vs filepath
*   uid, gid - {user|group}id, у процесса есть информация о тех, кто его запустил для знания прав
*   права rwx - read, write, execute
*   chmod 123,  1 - user, 2 - group, 3 - other
*   sticky bit
*   atime

     

02.03

### Жесткие диски



*   контроллеры умные/ не умные. Умеет перенаправлять данные с плохих блоков на хорошие. Плохие - ну умеют.
*   bootstraping  . Есть маленькая программа в одном блоке (512 байт), которая запускается первой и запускает более большие программы.

    RAID

*   Reliability. 1) redundancy (mirroring, parity, ECC)
*   Performance
*   Level
1. Pure striping 0
2. Pure mirroring 1
3.  0 + 1, 1 + 0
4. 2,3,4,5 - rare
*   аппаратные raid - не надо, получишь vendor lock-in и еще какой то геморрой.
*   в аппаратных raid однако бывает батарейка, которая может спасти транзакции, если отрубится питание. Однако вспоминается байка про SpaceWeb.

### Организация файловой системы

*   структура директории
1. список
2. хэш таблица
*   Выделение памяти
    *   Линейное расположение
        *   +Линейное чтение, меньше обращений
        *   -Внешняя фрагментация
    *   Связный список
        *   + нет внешней фрагментации
        *   -прыгаем по памяти
        *   -надежность
    *   fat
        *   улучшенный список
    *   indexedAllocation
    *   unix (с уровнями адресации)
*   свободные сектора
    *   bitvector
        *   fast
        *   space usage
    *   список
*   VFS

### Системные вызовы



*   creat, open, close, unlink, rmdir
*   chdir, getcwd
*   read, write, lseek
*   POSIX
*   readv, writev
